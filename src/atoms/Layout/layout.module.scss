$gutter-width: ru(.25);
$border: 1px solid color('neutral-6');

@mixin g-unit($cols: 1, $total-col-count: 12) {
  $width: calc( ( #{$cols} / #{$total-col-count} ) * 100%);

  width: $width;
  flex-basis: $width;
  flex-grow: 0;
  flex-shrink: 1;
}

@mixin createCols( $size ) {
  @for $i from 1 through 12 {
    .col-#{$size}-#{$i} {
      @include g-unit($i);
    }
  }

  .col-#{$size}-auto {
    width: auto;
    flex-basis: auto;
  }
}

.layout {
  display: flex;
  flex-wrap: wrap;
}

.col {
  padding-left: $gutter-width;
  padding-right: $gutter-width;
  flex: 1 0 auto;
}

@media #{$small-up} {
  @include createCols( 'sm' );
}

@media #{$medium-up} {
  @include createCols( 'md' );

  .bordered-buckets {
    [class*='col-'] {
      border-left: $border;
      border-left: $border;
      padding: ru(.75) ru(.5);

      &:first-child {
        border-left: none;
      }
    }
  }
}

@media #{$large-up} {
  @include createCols( 'lg' );
}

@media #{$xlarge-up} {
  @include createCols( 'xlg' );
}

@media #{$xxlarge-up} {
  @include createCols( 'xxlg' );
}

// Utility classes must come after base styles
// so that they can override the base in the cascade

.bottom-spacing {
  &-xSmall {
    margin-bottom: ru(.5);
  }

  &-small {
    margin-bottom: ru(1);
  }

  &-medium {
    margin-bottom: ru(1.5);
  }

  &-large {
    margin-bottom: ru(3);
  }

  &-xLarge {
    margin-bottom: ru(6);
  }
}

.fullwidth {
  padding: 0;
}

.padding {
  padding-left: $gutter-width;
  padding-right: $gutter-width;
}

.flex {
  flex-grow: 1;
}
